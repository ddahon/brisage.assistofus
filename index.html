<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur Brisage Dofus</title>
    <!-- Tailwind CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@latest/dist/tailwind.min.css" rel="stylesheet">
    <!-- Alpine.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@latest/dist/cdn.min.js" defer></script>
</head>

<body class="bg-gray-100">
    <!-- Header -->
    <header class="bg-blue-600 text-white p-4">
        <h1 class="text-xl font-bold">Calculateur Brisage Dofus</h1>
    </header>

    <!-- Main Content -->
    <main class="flex flex-col items-center  min-h-screen">
        <div x-data="{ query: '', suggestions: [] }" class="mt-44 w-1/2">
            <input type="text" x-model="query" @input="fetchSuggestions" placeholder="Rechercher un objet..."
                class="p-2 border border-gray-300 rounded w-full">
            <div x-show="suggestions.length > 0" class="mt-2">
                <ul class="bg-white border border-gray-300 rounded shadow-lg">
                    <template x-for="suggestion in suggestions" :key="suggestion.id">
                        <li class="p-2 hover:bg-gray-100 cursor-pointer" x-text="suggestion.name"
                            @click="selectSuggestion(suggestion)"></li>
                    </template>
                </ul>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-blue-600 text-white p-4 mt-auto">
        <p class="text-center">&copy; 2023 My App</p>
    </footer>

    <script>
        function fetchSuggestions() {
            if (this.query.length > 0) {
                fetch(`https://api.dofusdb.fr/items?typeId[$ne]=203&$sort=-id&typeId[$in][]=1&typeId[$in][]=9&typeId[$in][]=2&typeId[$in][]=3&typeId[$in][]=4&typeId[$in][]=5&typeId[$in][]=6&typeId[$in][]=7&typeId[$in][]=8&typeId[$in][]=19&typeId[$in][]=20&typeId[$in][]=21&typeId[$in][]=22&typeId[$in][]=114&typeId[$in][]=271&typeId[$in][]=11&typeId[$in][]=82&typeId[$in][]=17&typeId[$in][]=10&typeId[$in][]=16&slug.fr[$search]=${this.query}&level[$gte]=0&level[$lte]=200&$skip=0&lang=fr`)
                    .then(response => response.json())
                    .then(data => {
                        items = data.data.map((x) => ({ id: x.id, name: x.name.fr }))
                        this.suggestions = items;
                    });
            } else {
                this.suggestions = [];
            }
        }

        function selectSuggestion(suggestion) {
            console.log(suggestion.name)
            this.query = suggestion.name;
            this.suggestions = [];
        }
    </script>
</body>

</html>